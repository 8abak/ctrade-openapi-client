<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ML Review — Walk-Forward</title>
  <style>
    :root{
      --bg:#0f141a; --panel:#141b23; --ink:#e7edf3; --muted:#93a0ad;
      --accent:#4aa3ff; --good:#27d38e; --bad:#ff6b6b; --warn:#e7b75f; --violet:#b784ff;
    }
    html, body { height:100%; margin:0; }
    body { background:var(--bg); color:var(--ink); font:14px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .toolbar{ display:flex; gap:.5rem; align-items:center; padding:.6rem .8rem; background:var(--panel); position:sticky; top:0; z-index:10; }
    .toolbar input[type="number"]{ width:110px; padding:.35rem .45rem; background:#0b1016; border:1px solid #2a3642; border-radius:.4rem; color:var(--ink); }
    .toolbar button{ padding:.35rem .65rem; border:1px solid #2a3642; background:#0b1016; color:var(--ink); border-radius:.45rem; cursor:pointer; }
    .toolbar button:hover{ border-color:#44586c; }
    .toolbar label{ display:inline-flex; gap:.3rem; align-items:center; color:var(--muted); }
    .spacer{ flex:1; }
    #status{ padding:.35rem .8rem; color:var(--muted); }
    #chart{ height: calc(100vh - 180px); min-height:460px; }
    .footer{ height:8px; }
    /* Journal panel */
    #journalWrap{ background:#0b1016; border-top:1px solid #263241; display:none; }
    #journalHead{ display:flex; align-items:center; justify-content:space-between; padding:.45rem .8rem; color:var(--muted); }
    #journal{ height:180px; overflow:auto; padding:.4rem .8rem; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; white-space:pre; }
    .chip{ padding:.2rem .45rem; border-radius:999px; border:1px solid #2a3642; color:var(--muted); }
  </style>

  <!-- ECharts (CDN) with cache-buster -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js?v=2025-08-26-a"></script>
  <!-- Your app code (cache-busted) -->
  <script defer src="./review-core.js?v=2025-08-26-a"></script>
</head>
<body>
  <div class="toolbar">
    <label>Start tick <input id="startTick" type="number" value="1" min="1" step="1"></label>
    <label>End tick <input id="endTick" type="number" value="100000" min="1" step="1"></label>
    <button id="btnLoad">Load</button>
    <button id="btnRun">Run</button>

    <label><input id="chkMacro" type="checkbox" checked> Macro</label>
    <label><input id="chkEvents" type="checkbox" checked> Events</label>
    <label><input id="chkPreds" type="checkbox" checked> Predictions</label>
    <label><input id="chkOutcomes" type="checkbox" checked> Outcomes</label>

    <span class="spacer"></span>

    <span class="chip">Price streams:</span>
    <label><input id="chkMid"  type="checkbox" checked> Mid</label>
    <label><input id="chkBid"  type="checkbox"> Bid</label>
    <label><input id="chkAsk"  type="checkbox"> Ask</label>

    <span class="spacer"></span>

    <label>Jump to tick <input id="jumpTick" type="number" value="1" min="1" step="1"></label>
    <button id="btnJump">Jump</button>

    <button id="btnJournal" title="Show/Hide journal">Journal ▸</button>
  </div>

  <div id="status">Ready</div>
  <div id="chart"></div>

  <div id="journalWrap">
    <div id="journalHead">
      <span>Walk-forward journal</span>
      <div>
        <button id="btnClearJ">Clear</button>
        <button id="btnHideJ">Close</button>
      </div>
    </div>
    <div id="journal"></div>
  </div>

  <div class="footer"></div>
</body>
</html>
