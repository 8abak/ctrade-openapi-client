<!-- PATH: frontend/review2.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SegLines Review 2</title>
  <style>
    html, body { height: 100%; margin: 0; background: #0b0f18; color: #e6e6e6; font-family: system-ui, Arial; }
    .topbar {
      display: flex; gap: 10px; align-items: center;
      padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,0.08);
      background: #0b1220;
      position: sticky; top: 0; z-index: 5;
    }
    select, button, input {
      background: #111a2c; color: #e6e6e6; border: 1px solid rgba(255,255,255,0.15);
      padding: 6px 10px; border-radius: 8px; outline: none;
    }
    button { cursor: pointer; }
    button.primary { background: #1c4ed8; border-color: #1c4ed8; }
    button.primary:disabled { opacity: 0.6; cursor: not-allowed; }
    .pill { padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.15); background:#111a2c; cursor: pointer; }
    .pill.on { background: #1c4ed8; border-color: #1c4ed8; }
    .layout { height: calc(100% - 54px); display: grid; grid-template-rows: 1fr auto auto; }
    #chart { width: 100%; height: 100%; }
    .panel {
      border-top: 1px solid rgba(255,255,255,0.08);
      background: #0b1220;
      padding: 8px 12px;
    }
    .seglineRow {
      display:flex; gap:10px; align-items:center; padding:6px 8px; border-radius:10px;
      border: 1px solid rgba(255,255,255,0.08);
      margin: 6px 0;
      cursor: pointer;
      user-select: none;
    }
    .seglineRow.selected { outline: 2px solid #1c4ed8; }
    .seglineMeta { opacity: 0.85; font-size: 12px; }
    .small { font-size: 12px; opacity: 0.8; }
    .journalBox {
      max-height: 140px; overflow: auto; white-space: pre; font-family: ui-monospace, Menlo, Consolas, monospace;
      background: rgba(0,0,0,0.25);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 10px;
      padding: 8px;
    }
    .row { display:flex; gap:12px; align-items:center; flex-wrap: wrap; }
    .grow { flex: 1; min-width: 260px; }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="row grow">
      <span class="small">Segm:</span>
      <select id="segmSelect"></select>

      <span id="metaText" class="small"></span>
    </div>

    <div class="row">
      <span class="pill on" id="btnMid">Mid</span>
      <span class="pill on" id="btnKal">Kal</span>
      <span class="pill" id="btnBid">Bid</span>
      <span class="pill" id="btnAsk">Ask</span>

      <button class="primary" id="btnBreak" disabled>Break</button>
    </div>
  </div>

  <div class="layout">
    <div id="chart"></div>

    <div class="panel" id="segPanel">
      <div class="row">
        <div class="small">SegLines (click one to select):</div>
        <div id="selectedLineText" class="small"></div>
      </div>
      <div id="segLinesList"></div>
    </div>

    <div class="panel">
      <div class="row" style="justify-content: space-between;">
        <div class="small">Journal (today)</div>
        <div class="row">
          <button id="btnRefreshJournal">Refresh</button>
          <a id="journalLink" class="small" href="#" target="_blank" style="color:#9bb7ff;text-decoration:none;">open file</a>
        </div>
      </div>
      <div class="journalBox" id="journalBox">(no entries yet)</div>
    </div>
  </div>

  <!-- ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

  <!-- Controller -->
  <script src="/review2-core.js"></script>
</body>
</html>
