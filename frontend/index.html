<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Segmeling – Live/Review</title>

  <style>
    :root {
      --bg: #0b1220;
      --panel: #121a2b;
      --text: #e8eefc;
      --muted: #9fb0d0;
      --accent: #4aa3ff;
      --danger: #ff4a6a;
      --border: #22304a;
    }

    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .top-bar {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      background: var(--panel);
    }

    .brand {
      font-weight: 700;
      letter-spacing: 0.03em;
      color: var(--text);
      user-select: none;
    }

    .top-group {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    label {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--muted);
      font-size: 0.9rem;
      white-space: nowrap;
    }

    select, input[type="number"] {
      background: #0c1426;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.25rem 0.4rem;
      outline: none;
    }

    .btn-run, .btn-stop {
      border: 1px solid var(--border);
      background: #0c1426;
      color: var(--text);
      border-radius: 8px;
      padding: 0.35rem 0.7rem;
      cursor: pointer;
      font-weight: 600;
    }

    .btn-run { border-color: rgba(74,163,255,0.6); }
    .btn-stop { border-color: rgba(255,74,106,0.6); }

    .toggles {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 1rem;
      border-bottom: 1px solid var(--border);
      background: rgba(18,26,43,0.7);
      flex-wrap: wrap;
    }

    .toggle-item {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      color: var(--muted);
      font-size: 0.9rem;
    }

    .status {
      padding: 0.4rem 1rem;
      color: var(--muted);
      border-bottom: 1px solid var(--border);
      background: rgba(18,26,43,0.5);
      font-size: 0.9rem;
    }

    #segmeling-chart {
      width: 100%;
      height: calc(100vh - 160px);
    }
  </style>
</head>

<body>
  <header class="top-bar">
    <div class="brand">SEGEMLING / DATAVIS.AU</div>

    <div class="top-group">
      <label>
        Mode
        <select id="mode-select">
          <option value="live">Live</option>
          <option value="review">Review</option>
        </select>
      </label>

      <button id="btn-run-stop" class="btn-run">
        <span class="label">Run</span>
      </button>
    </div>

    <!-- Evals controls -->
    <div class="top-group">
      <label>
        Evals min level
        <select id="eval-min-level">
          <option value="1">1+</option>
          <option value="2" selected>2+</option>
          <option value="3">3+</option>
          <option value="4">4+</option>
          <option value="5">5+</option>
          <option value="6">6+</option>
          <option value="7">7+</option>
          <option value="8">8</option>
        </select>
      </label>
      <label>
        <input id="eval-visible-toggle" type="checkbox" checked />
        Show evals
      </label>
    </div>

    <!-- NEW: Review jump controls -->
    <div class="top-group" style="margin-left:auto; gap:0.5rem;">
      <label>
        From Id
        <input
          id="review-from-id"
          type="number"
          min="1"
          step="1"
          inputmode="numeric"
          placeholder="(optional)"
          style="width: 10rem;"
        />
      </label>

      <label>
        Window
        <input
          id="review-window"
          type="number"
          min="10"
          step="10"
          inputmode="numeric"
          value="2000"
          style="width: 6rem;"
        />
      </label>

      <button id="btn-review-jump" class="btn-run">Jump</button>
    </div>
  </header>

  <div class="toggles">
    <span class="toggle-item">
      <input type="checkbox" data-layer-group="mid" checked />
      Mid
    </span>

    <span class="toggle-item">
      <input type="checkbox" data-layer-group="bid" checked />
      Bid
    </span>

    <span class="toggle-item">
      <input type="checkbox" data-layer-group="ask" checked />
      Ask
    </span>

    <span class="toggle-item">
      <input type="checkbox" data-layer-group="kal" />
      Kal
    </span>

    <span class="toggle-item">
      <input type="checkbox" data-layer-group="pivots" />
      Pivots
    </span>

    <span class="toggle-item">
      <input type="checkbox" data-layer-group="swings" />
      Swings
    </span>

    <span class="toggle-item">
      <input type="checkbox" data-layer-group="zones" />
      Zones
    </span>
  </div>

  <div id="status-line" class="status">Loading…</div>

  <div id="segmeling-chart"></div>

  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <script src="chart-core.js"></script>
  <script src="index-core.js"></script>
</body>
</html>
